<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åšç‰©é¦†æ™ºæ…§ç®¡ç†ç³»ç»Ÿ MVP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 24px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: rgba(255,255,255,0.3);
            border-color: white;
            transform: translateY(-2px);
        }

        .content-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            min-height: 600px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e1e5e9;
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 500;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .qr-scanner {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
        }

        .qr-scanner:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .device-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-online {
            background: #d4edda;
            color: #155724;
        }

        .status-offline {
            background: #f8d7da;
            color: #721c24;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .main-nav {
                gap: 10px;
            }
            
            .nav-btn {
                padding: 8px 16px;
                font-size: 14px;
            }
            
            .content-area {
                padding: 20px;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›ï¸ åšç‰©é¦†æ™ºæ…§ç®¡ç†ç³»ç»Ÿ</h1>
            <p>Museum Smart Management System - MVPç‰ˆæœ¬</p>
        </div>

        <div class="main-nav">
            <button class="nav-btn active" onclick="showSection('overview')">æ€»è§ˆ</button>
            <button class="nav-btn" onclick="showSection('artifacts')">æ–‡ç‰©ç®¡ç†</button>
            <button class="nav-btn" onclick="showSection('devices')">è®¾å¤‡ç›‘æ§</button>
            <button class="nav-btn" onclick="showSection('activities')">æ´»åŠ¨ç®¡ç†</button>
            <button class="nav-btn" onclick="showSection('visitor')">è§‚ä¼—æœåŠ¡</button>
        </div>

        <div class="content-area">
            <!-- æ€»è§ˆé¡µé¢ -->
            <div id="overview" class="section active">
                <h2>ğŸ“Š æ•°æ®æ€»è§ˆ</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="totalArtifacts">156</h3>
                        <p>æ–‡ç‰©æ€»æ•°</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="onlineDevices">12</h3>
                        <p>åœ¨çº¿è®¾å¤‡</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="todayVisitors">89</h3>
                        <p>ä»Šæ—¥è®¿å®¢</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="activeEvents">3</h3>
                        <p>è¿›è¡Œä¸­æ´»åŠ¨</p>
                    </div>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <h3>ğŸº çƒ­é—¨æ–‡ç‰©</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>æ–‡ç‰©åç§°</th>
                                    <th>æµè§ˆæ¬¡æ•°</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>å”ä¸‰å½©é©¬ä¿‘</td><td>245</td></tr>
                                <tr><td>é’èŠ±ç“·ç“¶</td><td>198</td></tr>
                                <tr><td>æ±‰ä»£é“œé•œ</td><td>167</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card">
                        <h3>âš ï¸ è®¾å¤‡å‘Šè­¦</h3>
                        <div id="deviceAlerts">
                            <p style="color: #28a745;">âœ… æ‰€æœ‰è®¾å¤‡è¿è¡Œæ­£å¸¸</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ–‡ç‰©ç®¡ç†é¡µé¢ -->
            <div id="artifacts" class="section">
                <h2>ğŸº æ–‡ç‰©ç®¡ç†</h2>
                <div class="card-grid">
                    <div class="card">
                        <h3>ğŸ“ æ·»åŠ æ–‡ç‰©</h3>
                        <form id="artifactForm">
                            <div class="form-group">
                                <label>æ–‡ç‰©ç¼–å·</label>
                                <input type="text" id="artifactId" placeholder="ä¾‹ï¼šBM2024001" required>
                            </div>
                            <div class="form-group">
                                <label>æ–‡ç‰©åç§°</label>
                                <input type="text" id="artifactName" placeholder="ä¾‹ï¼šå”ä¸‰å½©é©¬ä¿‘" required>
                            </div>
                            <div class="form-group">
                                <label>å¹´ä»£</label>
                                <input type="text" id="artifactPeriod" placeholder="ä¾‹ï¼šå”ä»£">
                            </div>
                            <div class="form-group">
                                <label>å±•å…ä½ç½®</label>
                                <select id="artifactLocation">
                                    <option value="">è¯·é€‰æ‹©å±•å…</option>
                                    <option value="ancient">å¤ä»£æ–‡æ˜å…</option>
                                    <option value="ceramic">é™¶ç“·è‰ºæœ¯å…</option>
                                    <option value="bronze">é’é“œå™¨å…</option>
                                    <option value="calligraphy">å­—ç”»å…</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>æè¿°</label>
                                <textarea id="artifactDesc" rows="3" placeholder="æ–‡ç‰©è¯¦ç»†æè¿°..."></textarea>
                            </div>
                            <button type="submit" class="btn">æ·»åŠ æ–‡ç‰©</button>
                        </form>
                    </div>
                    <div class="card">
                        <h3>ğŸ” æ–‡ç‰©æœç´¢</h3>
                        <div class="form-group">
                            <input type="text" id="searchInput" placeholder="æœç´¢æ–‡ç‰©åç§°æˆ–ç¼–å·..." onkeyup="searchArtifacts()">
                        </div>
                        <div class="qr-scanner" onclick="simulateQRScan()">
                            <p>ğŸ“± ç‚¹å‡»æ‰«æäºŒç»´ç <br>å¿«é€ŸæŸ¥æ‰¾æ–‡ç‰©ä¿¡æ¯</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ“‹ æ–‡ç‰©åˆ—è¡¨</h3>
                    <table class="data-table" id="artifactsTable">
                        <thead>
                            <tr>
                                <th>ç¼–å·</th>
                                <th>åç§°</th>
                                <th>å¹´ä»£</th>
                                <th>ä½ç½®</th>
                                <th>çŠ¶æ€</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="artifactsTableBody">
                            <!-- åŠ¨æ€åŠ è½½å†…å®¹ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- è®¾å¤‡ç›‘æ§é¡µé¢ -->
            <div id="devices" class="section">
                <h2>ğŸ“¡ è®¾å¤‡ç›‘æ§</h2>
                <div class="card-grid">
                    <div class="card">
                        <h3>ğŸŒ¡ï¸ ç¯å¢ƒç›‘æ§</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h3 id="temperature">23Â°C</h3>
                                <p>æ¸©åº¦</p>
                            </div>
                            <div class="stat-card">
                                <h3 id="humidity">45%</h3>
                                <p>æ¹¿åº¦</p>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>ğŸ‘¥ äººæµç›‘æ§</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h3 id="currentVisitors">23</h3>
                                <p>å½“å‰åœ¨é¦†äººæ•°</p>
                            </div>
                            <div class="stat-card">
                                <h3 id="peakTime">14:30</h3>
                                <p>ä»Šæ—¥é«˜å³°æ—¶æ®µ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ”§ è®¾å¤‡çŠ¶æ€</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>è®¾å¤‡åç§°</th>
                                <th>ä½ç½®</th>
                                <th>çŠ¶æ€</th>
                                <th>æœ€åæ›´æ–°</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="devicesTableBody">
                            <!-- åŠ¨æ€åŠ è½½å†…å®¹ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- æ´»åŠ¨ç®¡ç†é¡µé¢ -->
            <div id="activities" class="section">
                <h2>ğŸ‰ æ´»åŠ¨ç®¡ç†</h2>
                <div class="card-grid">
                    <div class="card">
                        <h3>â• åˆ›å»ºæ´»åŠ¨</h3>
                        <form id="activityForm">
                            <div class="form-group">
                                <label>æ´»åŠ¨åç§°</label>
                                <input type="text" id="activityName" placeholder="ä¾‹ï¼šæ–‡ç‰©çŸ¥è¯†ç«èµ›" required>
                            </div>
                            <div class="form-group">
                                <label>æ´»åŠ¨æ—¶é—´</label>
                                <input type="datetime-local" id="activityTime" required>
                            </div>
                            <div class="form-group">
                                <label>ç›®æ ‡äººç¾¤</label>
                                <select id="targetAudience">
                                    <option value="all">æ‰€æœ‰è§‚ä¼—</option>
                                    <option value="students">å­¦ç”Ÿç¾¤ä½“</option>
                                    <option value="adults">æˆäººè§‚ä¼—</option>
                                    <option value="seniors">è€å¹´è§‚ä¼—</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>æ´»åŠ¨æè¿°</label>
                                <textarea id="activityDesc" rows="3" placeholder="æ´»åŠ¨è¯¦ç»†ä»‹ç»..."></textarea>
                            </div>
                            <button type="submit" class="btn">åˆ›å»ºæ´»åŠ¨</button>
                        </form>
                    </div>
                    <div class="card">
                        <h3>ğŸ“ˆ æ´»åŠ¨ç»Ÿè®¡</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h3 id="totalActivities">12</h3>
                                <p>æ€»æ´»åŠ¨æ•°</p>
                            </div>
                            <div class="stat-card">
                                <h3 id="activeParticipants">156</h3>
                                <p>æ´»è·ƒå‚ä¸è€…</p>
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="sendNotification()">ğŸ“± æ¨é€æ´»åŠ¨é€šçŸ¥</button>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ“… æ´»åŠ¨åˆ—è¡¨</h3>
                    <table class="data-table" id="activitiesTable">
                        <thead>
                            <tr>
                                <th>æ´»åŠ¨åç§°</th>
                                <th>æ—¶é—´</th>
                                <th>çŠ¶æ€</th>
                                <th>å‚ä¸äººæ•°</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="activitiesTableBody">
                            <!-- åŠ¨æ€åŠ è½½å†…å®¹ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- è§‚ä¼—æœåŠ¡é¡µé¢ -->
            <div id="visitor" class="section">
                <h2>ğŸ‘¥ è§‚ä¼—æœåŠ¡</h2>
                <div class="card-grid">
                    <div class="card">
                        <h3>ğŸ—ºï¸ æ™ºèƒ½å¯¼è§ˆ</h3>
                        <div class="qr-scanner" onclick="startNavigation()">
                            <p>ğŸ§­ ç‚¹å‡»å¼€å§‹æ™ºèƒ½å¯¼è§ˆ<br>ä¸ºè§‚ä¼—æä¾›æœ€ä½³å‚è§‚è·¯çº¿</p>
                        </div>
                        <div class="form-group">
                            <label>æ¨èè·¯çº¿</label>
                            <select id="recommendedRoute">
                                <option value="classic">ç»å…¸æ–‡ç‰©è·¯çº¿ (45åˆ†é’Ÿ)</option>
                                <option value="family">äº²å­äº’åŠ¨è·¯çº¿ (30åˆ†é’Ÿ)</option>
                                <option value="scholar">å­¦è€…æ·±åº¦è·¯çº¿ (90åˆ†é’Ÿ)</option>
                            </select>
                        </div>
                        <button class="btn">ç”Ÿæˆå¯¼è§ˆæ–¹æ¡ˆ</button>
                    </div>
                    <div class="card">
                        <h3>ğŸ¤– AIé—®ç­”åŠ©æ‰‹</h3>
                        <div id="chatArea" style="height: 200px; overflow-y: auto; border: 1px solid #e1e5e9; border-radius: 8px; padding: 10px; margin-bottom: 10px; background: #f8f9fa;">
                            <div style="margin-bottom: 10px;">
                                <strong>AIåŠ©æ‰‹:</strong> æ‚¨å¥½ï¼æˆ‘æ˜¯åšç‰©é¦†æ™ºèƒ½å¯¼è§ˆåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="text" id="userQuestion" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." onkeypress="handleEnterKey(event)">
                        </div>
                        <button class="btn" onclick="askAI()">ğŸ¤ è¯­éŸ³æé—®</button>
                        <button class="btn btn-secondary" onclick="sendQuestion()">ğŸ’¬ å‘é€é—®é¢˜</button>
                    </div>
                </div>

                <div class="card">
                    <h3>ğŸ“± äº’åŠ¨åŠŸèƒ½</h3>
                    <div class="card-grid">
                        <div class="card">
                            <h3>ğŸ“¸ ç”µå­æ˜ä¿¡ç‰‡</h3>
                            <p>è§‚ä¼—å¯ä»¥åˆ›å»ºä¸ªæ€§åŒ–æ˜ä¿¡ç‰‡ï¼Œåˆ†äº«å‚è§‚ä½“éªŒ</p>
                            <button class="btn" onclick="createPostcard()">åˆ›å»ºæ˜ä¿¡ç‰‡</button>
                        </div>
                        <div class="card">
                            <h3>ğŸ’¬ ç¤¾åŒºåˆ†äº«</h3>
                            <p>å‚è§‚å¿ƒå¾—åˆ†äº«å¹³å°ï¼Œå¢è¿›æ–‡åŒ–äº¤æµ</p>
                            <button class="btn btn-secondary" onclick="viewCommunity()">æŸ¥çœ‹ç¤¾åŒº</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        let artifacts = [
            { id: 'BM2024001', name: 'å”ä¸‰å½©é©¬ä¿‘', period: 'å”ä»£', location: 'å¤ä»£æ–‡æ˜å…', status: 'å±•å‡ºä¸­' },
            { id: 'BM2024002', name: 'é’èŠ±ç“·ç“¶', period: 'æ˜ä»£', location: 'é™¶ç“·è‰ºæœ¯å…', status: 'å±•å‡ºä¸­' },
            { id: 'BM2024003', name: 'æ±‰ä»£é“œé•œ', period: 'æ±‰ä»£', location: 'é’é“œå™¨å…', status: 'ç»´æŠ¤ä¸­' },
            { id: 'BM2024004', name: 'å®‹ä»£å­—ç”»', period: 'å®‹ä»£', location: 'å­—ç”»å…', status: 'å±•å‡ºä¸­' }
        ];

        let devices = [
            { name: 'æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨-1', location: 'å¤ä»£æ–‡æ˜å…', status: 'online', lastUpdate: '2åˆ†é’Ÿå‰' },
            { name: 'äººæµè®¡æ•°å™¨-A', location: 'å…¥å£å¤§å…', status: 'online', lastUpdate: '1åˆ†é’Ÿå‰' },
            { name: 'å®‰é˜²æ‘„åƒå¤´-3', location: 'é™¶ç“·è‰ºæœ¯å…', status: 'warning', lastUpdate: '5åˆ†é’Ÿå‰' },
            { name: 'ç…§æ˜ç³»ç»Ÿ-B', location: 'é’é“œå™¨å…', status: 'online', lastUpdate: '3åˆ†é’Ÿå‰' }
        ];

        let activities = [
            { name: 'æ–‡ç‰©çŸ¥è¯†ç«èµ›', time: '2024-06-15 14:00', status: 'è¿›è¡Œä¸­', participants: 45 },
            { name: 'å¤ä»£æ–‡æ˜è®²åº§', time: '2024-06-20 10:00', status: 'å³å°†å¼€å§‹', participants: 23 },
            { name: 'äº²å­äº’åŠ¨ä½“éªŒ', time: '2024-06-10 15:30', status: 'å·²ç»“æŸ', participants: 67 }
        ];

        // é¡µé¢åˆ‡æ¢åŠŸèƒ½
        function showSection(sectionId) {
            // éšè—æ‰€æœ‰section
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰å¯¼èˆªæŒ‰é’®çš„activeçŠ¶æ€
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡section
            document.getElementById(sectionId).classList.add('active');
            
            // è®¾ç½®å¯¹åº”å¯¼èˆªæŒ‰é’®ä¸ºactive
            event.target.classList.add('active');
            
            // åŠ è½½å¯¹åº”æ•°æ®
            loadSectionData(sectionId);
        }

        // åŠ è½½å„sectionæ•°æ®
        function loadSectionData(sectionId) {
            switch(sectionId) {
                case 'artifacts':
                    loadArtifactsTable();
                    break;
                case 'devices':
                    loadDevicesTable();
                    updateEnvironmentData();
                    break;
                case 'activities':
                    loadActivitiesTable();
                    break;
            }
        }

        // åŠ è½½æ–‡ç‰©è¡¨æ ¼
        function loadArtifactsTable() {
            const tbody = document.getElementById('artifactsTableBody');
            tbody.innerHTML = artifacts.map(artifact => `
                <tr>
                    <td>${artifact.id}</td>
                    <td>${artifact.name}</td>
                    <td>${artifact.period}</td>
                    <td>${artifact.location}</td>
                    <td><span class="device-status ${artifact.status === 'å±•å‡ºä¸­' ? 'status-online' : 'status-warning'}">${artifact.status}</span></td>
                    <td>
                        <button class="btn" style="padding: 5px 10px; font-size: 12px;" onclick="editArtifact('${artifact.id}')">ç¼–è¾‘</button>
                        <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="viewArtifact('${artifact.id}')">æŸ¥çœ‹</button>
                    </td>
                </tr>
            `).join('');
        }

        // æ¨¡æ‹ŸäºŒç»´ç æ‰«æ
        function simulateQRScan() {
            const randomArtifact = artifacts[Math.floor(Math.random() * artifacts.length)];
            alert(`æ‰«ææˆåŠŸï¼\næ–‡ç‰©ä¿¡æ¯ï¼š\nç¼–å·ï¼š${randomArtifact.id}\nåç§°ï¼š${randomArtifact.name}\nå¹´ä»£ï¼š${randomArtifact.period}\nä½ç½®ï¼š${randomArtifact.location}`);
        }

        // æ›´æ–°ç¯å¢ƒæ•°æ®
        function updateEnvironmentData() {
            // æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°
            setInterval(() => {
                const temp = 20 + Math.random() * 8;
                const humidity = 40 + Math.random() * 20;
                const visitors = Math.floor(15 + Math.random() * 20);
                
                document.getElementById('temperature').textContent = temp.toFixed(1) + 'Â°C';
                document.getElementById('humidity').textContent = humidity.toFixed(0) + '%';
                document.getElementById('currentVisitors').textContent = visitors;
            }, 5000);
        }

        // AIé—®ç­”åŠŸèƒ½
        function sendQuestion() {
            const question = document.getElementById('userQuestion').value;
            if (!question.trim()) return;
            
            const chatArea = document.getElementById('chatArea');
            
            // æ·»åŠ ç”¨æˆ·é—®é¢˜
            chatArea.innerHTML += `<div style="margin-bottom: 10px; text-align: right;"><strong>æ‚¨:</strong> ${question}</div>`;
            
            // æ¨¡æ‹ŸAIå›ç­”
            setTimeout(() => {
                const answers = [
                    'è¿™ä»¶æ–‡ç‰©æ¥è‡ªå”ä»£ï¼Œæ˜¯å½“æ—¶ä¸ç»¸ä¹‹è·¯è´¸æ˜“çš„é‡è¦è§è¯ã€‚',
                    'å»ºè®®æ‚¨å‚è§‚å¤ä»£æ–‡æ˜å…çš„é’é“œå™¨å±•åŒºï¼Œé‚£é‡Œæœ‰å¾ˆå¤šç²¾ç¾çš„æ–‡ç‰©ã€‚',
                    'æˆ‘ä»¬çš„å¼€æ”¾æ—¶é—´æ˜¯å‘¨äºŒè‡³å‘¨æ—¥ 9:00-17:00ï¼Œå‘¨ä¸€é—­é¦†ã€‚',
                    'è¿™ä¸ªå±•å“ä½¿ç”¨äº†å½“æ—¶æœ€å…ˆè¿›çš„å·¥è‰ºæŠ€æœ¯ï¼Œå…·æœ‰å¾ˆé«˜çš„è‰ºæœ¯ä»·å€¼ã€‚',
                    'æ‚¨å¯ä»¥åœ¨æˆ‘ä»¬çš„å¤šåª’ä½“åŒºè§‚çœ‹æ›´è¯¦ç»†çš„ä»‹ç»è§†é¢‘ã€‚'
                ];
                const randomAnswer = answers[Math.floor(Math.random() * answers.length)];
                chatArea.innerHTML += `<div style="margin-bottom: 10px;"><strong>AIåŠ©æ‰‹:</strong> ${randomAnswer}</div>`;
                chatArea.scrollTop = chatArea.scrollHeight;
            }, 1000);
            
            document.getElementById('userQuestion').value = '';
        }

        // å¤„ç†å›è½¦é”®
        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                sendQuestion();
            }
        }

        // è¯­éŸ³æé—®ï¼ˆæ¨¡æ‹Ÿï¼‰
        function askAI() {
            alert('ğŸ¤ è¯­éŸ³è¯†åˆ«åŠŸèƒ½å·²å¯åŠ¨\nè¯·è¯´å‡ºæ‚¨çš„é—®é¢˜...\n\nï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨è¯­éŸ³è¯†åˆ«APIï¼‰');
            
            // æ¨¡æ‹Ÿè¯­éŸ³è¯†åˆ«ç»“æœ
            setTimeout(() => {
                document.getElementById('userQuestion').value = 'è¿™ä»¶é’èŠ±ç“·æ˜¯ä»€ä¹ˆå¹´ä»£çš„ï¼Ÿ';
                sendQuestion();
            }, 2000);
        }

        // å¼€å§‹å¯¼è§ˆ
        function startNavigation() {
            const route = document.getElementById('recommendedRoute').value;
            let routeInfo = '';
            
            switch(route) {
                case 'classic':
                    routeInfo = 'ç»å…¸æ–‡ç‰©è·¯çº¿ï¼š\n1. å¤ä»£æ–‡æ˜å… - å”ä¸‰å½©é©¬ä¿‘\n2. é™¶ç“·è‰ºæœ¯å… - é’èŠ±ç“·ç“¶\n3. é’é“œå™¨å… - æ±‰ä»£é“œé•œ\n4. å­—ç”»å… - å®‹ä»£å­—ç”»\n\né¢„è®¡ç”¨æ—¶ï¼š45åˆ†é’Ÿ';
                    break;
                case 'family':
                    routeInfo = 'äº²å­äº’åŠ¨è·¯çº¿ï¼š\n1. äº’åŠ¨ä½“éªŒåŒº\n2. æ–‡ç‰©çŸ¥è¯†é—®ç­”\n3. æ‰‹å·¥åˆ¶ä½œåŒº\n4. å¤šåª’ä½“å±•ç¤º\n\né¢„è®¡ç”¨æ—¶ï¼š30åˆ†é’Ÿ';
                    break;
                case 'scholar':
                    routeInfo = 'å­¦è€…æ·±åº¦è·¯çº¿ï¼š\n1. è¯¦ç»†æ–‡ç‰©è§£è¯´\n2. å†å²èƒŒæ™¯ä»‹ç»\n3. å·¥è‰ºæŠ€æœ¯åˆ†æ\n4. æ–‡åŒ–ä»·å€¼æ¢è®¨\n\né¢„è®¡ç”¨æ—¶ï¼š90åˆ†é’Ÿ';
                    break;
            }
            
            alert(`ğŸ§­ æ™ºèƒ½å¯¼è§ˆå·²å¼€å§‹ï¼\n\n${routeInfo}\n\nå¯¼è§ˆå°†é€šè¿‡è¯­éŸ³ä¸ºæ‚¨è¯¦ç»†ä»‹ç»æ¯ä»¶æ–‡ç‰©çš„å†å²å’Œæ–‡åŒ–ä»·å€¼ã€‚`);
        }

        // åˆ›å»ºæ˜ä¿¡ç‰‡
        function createPostcard() {
            alert('ğŸ“¸ ç”µå­æ˜ä¿¡ç‰‡åŠŸèƒ½\n\næ‚¨å¯ä»¥ï¼š\nâ€¢ é€‰æ‹©å–œæ¬¢çš„æ–‡ç‰©ç…§ç‰‡\nâ€¢ æ·»åŠ ä¸ªæ€§åŒ–æ–‡å­—\nâ€¢ åˆ†äº«åˆ°ç¤¾äº¤å¹³å°\nâ€¢ å‘é€ç»™æœ‹å‹å®¶äºº\n\nè®©ç¾å¥½çš„å‚è§‚ä½“éªŒæ°¸ä¹…ä¿å­˜ï¼');
        }

        // æŸ¥çœ‹ç¤¾åŒº
        function viewCommunity() {
            alert('ğŸ’¬ äº’åŠ¨ç¤¾åŒº\n\nçƒ­é—¨è¯é¢˜ï¼š\nâ€¢ #æˆ‘æœ€å–œæ¬¢çš„æ–‡ç‰©\nâ€¢ #åšç‰©é¦†å¥‡å¦™ä¹‹æ—…\nâ€¢ #å†å²æ–‡åŒ–æ¢ç´¢\n\nå‚ä¸è®¨è®ºï¼Œåˆ†äº«æ‚¨çš„å‚è§‚æ„Ÿå—ï¼Œä¸å…¶ä»–æ–‡åŒ–çˆ±å¥½è€…äº¤æµï¼');
        }

        // å‘é€é€šçŸ¥
        function sendNotification() {
            alert('ğŸ“± æ´»åŠ¨é€šçŸ¥å·²å‘é€ï¼\n\né€šçŸ¥å†…å®¹ï¼š\nâ€¢ æ–°æ´»åŠ¨"æ–‡ç‰©çŸ¥è¯†ç«èµ›"å³å°†å¼€å§‹\nâ€¢ æ—¶é—´ï¼šæœ¬å‘¨å…­ 14:00\nâ€¢ åœ°ç‚¹ï¼šå¤šåŠŸèƒ½å…\nâ€¢ ç²¾ç¾å¥–å“ç­‰æ‚¨æ¥æ‹¿ï¼\n\nå·²æ¨é€ç»™156ä½ç”¨æˆ·');
        }

        // ç¼–è¾‘å’ŒæŸ¥çœ‹åŠŸèƒ½ï¼ˆæ¨¡æ‹Ÿï¼‰
        function editArtifact(id) {
            alert(`ç¼–è¾‘æ–‡ç‰© ${id}\nï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ä¼šæ‰“å¼€ç¼–è¾‘è¡¨å•ï¼‰`);
        }

        function viewArtifact(id) {
            const artifact = artifacts.find(a => a.id === id);
            alert(`æ–‡ç‰©è¯¦æƒ…ï¼š\nç¼–å·ï¼š${artifact.id}\nåç§°ï¼š${artifact.name}\nå¹´ä»£ï¼š${artifact.period}\nä½ç½®ï¼š${artifact.location}\nçŠ¶æ€ï¼š${artifact.status}`);
        }

        function controlDevice(name) {
            alert(`è®¾å¤‡æ§åˆ¶ï¼š${name}\nï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ä¼šæ˜¾ç¤ºè®¾å¤‡æ§åˆ¶é¢æ¿ï¼‰`);
        }

        function editActivity(name) {
            alert(`ç¼–è¾‘æ´»åŠ¨ï¼š${name}\nï¼ˆåœ¨å®é™…åº”ç”¨ä¸­ä¼šæ‰“å¼€æ´»åŠ¨ç¼–è¾‘ç•Œé¢ï¼‰`);
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®
        document.addEventListener('DOMContentLoaded', function() {
            loadArtifactsTable();
            updateEnvironmentData();
            
            // æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°
            setInterval(() => {
                const todayVisitors = 80 + Math.floor(Math.random() * 30);
                document.getElementById('todayVisitors').textContent = todayVisitors;
                
                const onlineDevices = 10 + Math.floor(Math.random() * 5);
                document.getElementById('onlineDevices').textContent = onlineDevices;
            }, 10000);
        });
    </script>
</body>
</html>status-online' : 'status-warning'}">${artifact.status}</span></td>
                    <td>
                        <button class="btn" style="padding: 5px 10px; font-size: 12px;" onclick="editArtifact('${artifact.id}')">ç¼–è¾‘</button>
                        <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="viewArtifact('${artifact.id}')">æŸ¥çœ‹</button>
                    </td>
                </tr>
            `).join('');
        }

        // åŠ è½½è®¾å¤‡è¡¨æ ¼
        function loadDevicesTable() {
            const tbody = document.getElementById('devicesTableBody');
            tbody.innerHTML = devices.map(device => `
                <tr>
                    <td>${device.name}</td>
                    <td>${device.location}</td>
                    <td><span class="device-status status-${device.status}">${device.status === 'online' ? 'åœ¨çº¿' : device.status === 'offline' ? 'ç¦»çº¿' : 'å‘Šè­¦'}</span></td>
                    <td>${device.lastUpdate}</td>
                    <td>
                        <button class="btn" style="padding: 5px 10px; font-size: 12px;" onclick="controlDevice('${device.name}')">æ§åˆ¶</button>
                    </td>
                </tr>
            `).join('');
        }

        // åŠ è½½æ´»åŠ¨è¡¨æ ¼
        function loadActivitiesTable() {
            const tbody = document.getElementById('activitiesTableBody');
            tbody.innerHTML = activities.map(activity => `
                <tr>
                    <td>${activity.name}</td>
                    <td>${activity.time}</td>
                    <td><span class="device-status ${activity.status === 'è¿›è¡Œä¸­' ? 'status-online' : activity.status === 'å³å°†å¼€å§‹' ? 'status-warning' : 'status-offline'}">${activity.status}</span></td>
                    <td>${activity.participants}</td>
                    <td>
                        <button class="btn" style="padding: 5px 10px; font-size: 12px;" onclick="editActivity('${activity.name}')">ç¼–è¾‘</button>
                    </td>
                </tr>
            `).join('');
        }

        // æ–‡ç‰©è¡¨å•æäº¤
        document.getElementById('artifactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newArtifact = {
                id: document.getElementById('artifactId').value,
                name: document.getElementById('artifactName').value,
                period: document.getElementById('artifactPeriod').value,
                location: document.getElementById('artifactLocation').options[document.getElementById('artifactLocation').selectedIndex].text,
                status: 'å±•å‡ºä¸­'
            };
            
            artifacts.push(newArtifact);
            loadArtifactsTable();
            
            // æ›´æ–°æ€»è§ˆæ•°æ®
            document.getElementById('totalArtifacts').textContent = artifacts.length;
            
            alert('æ–‡ç‰©æ·»åŠ æˆåŠŸï¼');
            this.reset();
        });

        // æ´»åŠ¨è¡¨å•æäº¤
        document.getElementById('activityForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newActivity = {
                name: document.getElementById('activityName').value,
                time: document.getElementById('activityTime').value,
                status: 'å³å°†å¼€å§‹',
                participants: 0
            };
            
            activities.push(newActivity);
            loadActivitiesTable();
            
            // æ›´æ–°æ€»è§ˆæ•°æ®
            document.getElementById('activeEvents').textContent = activities.filter(a => a.status === 'è¿›è¡Œä¸­').length;
            
            alert('æ´»åŠ¨åˆ›å»ºæˆåŠŸï¼');
            this.reset();
        });

        // æœç´¢åŠŸèƒ½
        function searchArtifacts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredArtifacts = artifacts.filter(artifact => 
                artifact.name.toLowerCase().includes(searchTerm) || 
                artifact.id.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('artifactsTableBody');
            tbody.innerHTML = filteredArtifacts.map(artifact => `
                <tr>
                    <td>${artifact.id}</td>
                    <td>${artifact.name}</td>
                    <td>${artifact.period}</td>
                    <td>${artifact.location}</td>
                    <td><span class="device-status ${artifact.status === 'å±•å‡ºä¸­' ? '